<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SSE Client</title>
</head>
<body>
<h1>SSE Client</h1>
<div id="sseData1"></div>
<div id="sseData2"></div>

<script>
    const sseUrl1 = '/events/1';
    const sseUrl2 = '/events/2';

    function sseConn1() {
        const sseSource = new EventSource(sseUrl1);

        sseSource.onmessage = function(event) {
            const eventData = event.data;
            console.log(eventData);
            const sseDataElement = document.getElementById('sseData1');

            sseDataElement.innerHTML += '<br>Received data: ' + eventData;
        };

        sseSource.onerror = function(event) {
            console.error('SSE connection error! Reconnecting...');
            sseSource.close(); // 기존 SSE 연결 닫기
            sseConn1(); // 다시 연결
        };
    }

    function sseConn2() {
        const sseSource = new EventSource(sseUrl2);

        sseSource.onmessage = function(event) {
            const eventData = event.data;
            console.log(eventData);
            const sseDataElement = document.getElementById('sseData2');

            sseDataElement.innerHTML += '<br>Received data: ' + eventData;
        };

        sseSource.onerror = function(event) {
            console.error('SSE connection error! Reconnecting...');
            sseSource.close(); // 기존 SSE 연결 닫기
            sseConn2(); // 다시 연결
        };
    }

    sseConn1();
    sseConn2();
     console.log("hello");
</script>

</body>
</html>
